<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Practice Settings | CHIZSA COACHING</title>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Georgia', serif;
      background: linear-gradient(135deg, #1a3d2e 0%, #0f2419 100%);
      color: #f4f1e8;
      line-height: 1.6;
      min-height: 100vh;
    }

    * {
      box-sizing: border-box;
    }

    /* Header Styles */
    .settings-header {
      background: rgba(26, 61, 46, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(212, 175, 55, 0.3);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 70px;
    }

    .brand {
      font-size: 1.5rem;
      font-weight: bold;
      color: #d4af37;
      text-decoration: none;
      letter-spacing: 1px;
    }

    .nav-links {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .nav-link {
      color: #c9d1d9;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-link:hover {
      color: #d4af37;
    }

    .back-btn {
      padding: 8px 16px;
      border: 1px solid #d4af37;
      border-radius: 6px;
      background: transparent;
      color: #d4af37;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .back-btn:hover {
      background: #d4af37;
      color: #1a3d2e;
    }

    /* Main Container */
    .settings-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .settings-title {
      color: #d4af37;
      font-size: 2.5rem;
      margin: 0 0 15px;
      font-weight: 300;
      letter-spacing: 1px;
      text-align: center;
    }

    .settings-subtitle {
      color: #c9d1d9;
      font-size: 1.2rem;
      text-align: center;
      margin: 0 0 40px;
      font-weight: 300;
    }

    /* Settings Cards */
    .settings-grid {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .settings-card {
      background: rgba(26, 61, 46, 0.6);
      border: 1px solid rgba(212, 175, 55, 0.2);
      border-radius: 12px;
      padding: 30px;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .settings-card:hover {
      border-color: rgba(212, 175, 55, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(212, 175, 55, 0.3);
    }

    .card-icon {
      font-size: 2rem;
      color: #d4af37;
    }

    .card-title {
      color: #d4af37;
      font-size: 1.6rem;
      margin: 0;
      font-weight: 600;
    }

    .card-description {
      color: #c9d1d9;
      font-size: 1rem;
      margin: 0 0 25px;
      line-height: 1.5;
    }

    /* Goal Selection */
    .goal-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }

    .goal-option {
      background: rgba(15, 36, 25, 0.6);
      border: 2px solid rgba(212, 175, 55, 0.2);
      border-radius: 8px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .goal-option:hover {
      border-color: rgba(212, 175, 55, 0.5);
      transform: translateY(-2px);
    }

    .goal-option.selected {
      border-color: #d4af37;
      background: rgba(212, 175, 55, 0.1);
    }

    .goal-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      display: block;
    }

    .goal-title {
      color: #f4f1e8;
      font-weight: 600;
      margin: 0 0 8px;
      font-size: 1.1rem;
    }

    .goal-description {
      color: #c9d1d9;
      font-size: 0.9rem;
      margin: 0;
      line-height: 1.4;
    }

    /* Level Selection */
    .level-selector {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .level-option {
      flex: 1;
      min-width: 120px;
      padding: 15px 20px;
      background: rgba(15, 36, 25, 0.6);
      border: 2px solid rgba(212, 175, 55, 0.2);
      border-radius: 8px;
      color: #c9d1d9;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .level-option:hover {
      border-color: rgba(212, 175, 55, 0.5);
    }

    .level-option.selected {
      border-color: #d4af37;
      background: rgba(212, 175, 55, 0.1);
      color: #d4af37;
    }

    /* Practice Schedule */
    .schedule-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }

    .schedule-option {
      background: rgba(15, 36, 25, 0.6);
      border: 2px solid rgba(212, 175, 55, 0.2);
      border-radius: 8px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .schedule-option:hover {
      border-color: rgba(212, 175, 55, 0.5);
    }

    .schedule-option.selected {
      border-color: #d4af37;
      background: rgba(212, 175, 55, 0.1);
    }

    .schedule-time {
      color: #d4af37;
      font-size: 1.5rem;
      font-weight: 600;
      margin: 0 0 8px;
    }

    .schedule-label {
      color: #f4f1e8;
      font-weight: 600;
      margin: 0 0 5px;
      font-size: 1rem;
    }

    .schedule-description {
      color: #c9d1d9;
      font-size: 0.85rem;
      margin: 0;
    }

    /* Progress Display */
    .progress-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }

    .stat-item {
      background: rgba(15, 36, 25, 0.6);
      border: 1px solid rgba(212, 175, 55, 0.1);
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .stat-value {
      color: #d4af37;
      font-size: 2rem;
      font-weight: 600;
      margin: 0 0 8px;
    }

    .stat-label {
      color: #c9d1d9;
      font-size: 0.9rem;
      margin: 0;
    }

    /* Simple Toggle */
    .simple-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: rgba(15, 36, 25, 0.6);
      border: 1px solid rgba(212, 175, 55, 0.1);
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .toggle-info {
      flex: 1;
    }

    .toggle-title {
      color: #f4f1e8;
      font-weight: 600;
      margin: 0 0 5px;
      font-size: 1rem;
    }

    .toggle-description {
      color: #c9d1d9;
      font-size: 0.9rem;
      margin: 0;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(191, 138, 44, 0.3);
      transition: 0.3s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: #c9d1d9;
      transition: 0.3s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: #d4af37;
    }

    input:checked + .toggle-slider:before {
      transform: translateX(26px);
      background-color: #1a3d2e;
    }

    /* Button Styles */
    .btn {
      padding: 15px 30px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
    }

    .btn-primary {
      background: linear-gradient(135deg, #d4af37, #e6c55a);
      color: #1a3d2e;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
    }

    .btn-secondary {
      background: transparent;
      color: #d4af37;
      border: 1px solid #d4af37;
    }

    .btn-secondary:hover {
      background: #d4af37;
      color: #1a3d2e;
    }

    .form-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    /* Notifications */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(26, 61, 46, 0.95);
      border: 1px solid rgba(212, 175, 55, 0.5);
      border-radius: 8px;
      padding: 15px 20px;
      color: #f4f1e8;
      z-index: 10000;
      backdrop-filter: blur(10px);
      transform: translateX(400px);
      transition: transform 0.3s ease;
    }

    .notification.show {
      transform: translateX(0);
    }

    .notification.success {
      border-color: #3fa67a;
    }

    .notification.error {
      border-color: #e74c3c;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .header-container {
        flex-direction: column;
        height: auto;
        padding: 15px 20px;
        gap: 15px;
      }

      .nav-links {
        flex-direction: column;
        gap: 15px;
      }

      .settings-title {
        font-size: 2rem;
      }

      .settings-container {
        padding: 20px 15px;
      }

      .settings-card {
        padding: 20px;
      }

      .goal-grid {
        grid-template-columns: 1fr;
      }

      .level-selector {
        flex-direction: column;
      }

      .level-option {
        min-width: auto;
      }

      .schedule-grid {
        grid-template-columns: 1fr;
      }

      .progress-stats {
        grid-template-columns: repeat(2, 1fr);
      }

      .form-actions {
        flex-direction: column;
      }
    }

    @media (max-width: 480px) {
      .progress-stats {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="settings-header">
    <div class="header-container">
      <a class="brand" href="/">CHIZSA | COACHING</a>
      <nav class="nav-links">
        <a href="/dashboard.html" class="nav-link">Dashboard</a>
        <a href="/practice.html" class="nav-link">Practice</a>
        <a href="/dashboard.html" class="back-btn">‚Üê Back to Dashboard</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="settings-container">
    <h1 class="settings-title">Practice Settings</h1>
    <p class="settings-subtitle">Set up your English practice goals and track your progress</p>

    <div class="settings-grid">
      <!-- Learning Goals -->
      <div class="settings-card">
        <div class="card-header">
          <span class="card-icon">üéØ</span>
          <h2 class="card-title">Your Learning Goal</h2>
        </div>
        <p class="card-description">Choose your main focus area for English practice</p>
        
        <div class="goal-grid">
          <div class="goal-option" data-goal="medical">
            <span class="goal-icon">üè•</span>
            <h3 class="goal-title">Medical English</h3>
            <p class="goal-description">Healthcare terminology, patient communication, medical procedures</p>
          </div>
          
          <div class="goal-option" data-goal="business">
            <span class="goal-icon">üíº</span>
            <h3 class="goal-title">Business English</h3>
            <p class="goal-description">Professional communication, presentations, meetings, emails</p>
          </div>
          
          <div class="goal-option" data-goal="general">
            <span class="goal-icon">üåü</span>
            <h3 class="goal-title">General English</h3>
            <p class="goal-description">Everyday conversation, grammar, vocabulary building</p>
          </div>
        </div>
      </div>

      <!-- Current Level -->
      <div class="settings-card">
        <div class="card-header">
          <span class="card-icon">üìä</span>
          <h2 class="card-title">Your Current Level</h2>
        </div>
        <p class="card-description">Select your current English proficiency level</p>
        
        <div class="level-selector">
          <div class="level-option" data-level="beginner">
            <div>Beginner</div>
            <small>A1-A2</small>
          </div>
          <div class="level-option" data-level="intermediate">
            <div>Intermediate</div>
            <small>B1-B2</small>
          </div>
          <div class="level-option" data-level="advanced">
            <div>Advanced</div>
            <small>C1-C2</small>
          </div>
        </div>
      </div>

      <!-- Practice Schedule -->
      <div class="settings-card">
        <div class="card-header">
          <span class="card-icon">‚è∞</span>
          <h2 class="card-title">Practice Schedule</h2>
        </div>
        <p class="card-description">How much time can you practice each day?</p>
        
        <div class="schedule-grid">
          <div class="schedule-option" data-schedule="15">
            <div class="schedule-time">15 min</div>
            <div class="schedule-label">Quick Practice</div>
            <div class="schedule-description">Perfect for busy days</div>
          </div>
          
          <div class="schedule-option" data-schedule="30">
            <div class="schedule-time">30 min</div>
            <div class="schedule-label">Regular Practice</div>
            <div class="schedule-description">Recommended daily practice</div>
          </div>
          
          <div class="schedule-option" data-schedule="60">
            <div class="schedule-time">60 min</div>
            <div class="schedule-label">Intensive Practice</div>
            <div class="schedule-description">For faster progress</div>
          </div>
        </div>
      </div>

      <!-- Progress Tracking -->
      <div class="settings-card">
        <div class="card-header">
          <span class="card-icon">üìà</span>
          <h2 class="card-title">Your Progress</h2>
        </div>
        <p class="card-description">Track your learning journey and achievements</p>
        
        <div class="progress-stats">
          <div class="stat-item">
            <div class="stat-value" id="days-practiced">0</div>
            <div class="stat-label">Days Practiced</div>
          </div>
          
          <div class="stat-item">
            <div class="stat-value" id="total-minutes">0</div>
            <div class="stat-label">Total Minutes</div>
          </div>
          
          <div class="stat-item">
            <div class="stat-value" id="current-streak">0</div>
            <div class="stat-label">Current Streak</div>
          </div>
          
          <div class="stat-item">
            <div class="stat-value" id="tools-completed">0</div>
            <div class="stat-label">Tools Completed</div>
          </div>
        </div>
      </div>

      <!-- Simple Preferences -->
      <div class="settings-card">
        <div class="card-header">
          <span class="card-icon">‚öôÔ∏è</span>
          <h2 class="card-title">Practice Preferences</h2>
        </div>
        <p class="card-description">Simple settings to improve your practice experience</p>
        
        <div class="simple-toggle">
          <div class="toggle-info">
            <h3 class="toggle-title">Daily Reminders</h3>
            <p class="toggle-description">Get a gentle reminder to practice each day</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="daily-reminders" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="simple-toggle">
          <div class="toggle-info">
            <h3 class="toggle-title">Progress Tracking</h3>
            <p class="toggle-description">Save your practice data and track improvement</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="progress-tracking" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="simple-toggle">
          <div class="toggle-info">
            <h3 class="toggle-title">Audio Pronunciation</h3>
            <p class="toggle-description">Enable audio for pronunciation practice</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="audio-pronunciation" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="simple-toggle">
          <div class="toggle-info">
            <h3 class="toggle-title">Simplified Interface</h3>
            <p class="toggle-description">Use a cleaner, simpler practice interface</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="simplified-interface">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Save Settings -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" onclick="resetSettings()">Reset to Default</button>
        <button type="button" class="btn btn-primary" onclick="saveSettings()">
          üíæ Save My Settings
        </button>
      </div>
    </div>
  </main>

  <script>
    // Initialize settings page
    (async function() {
      const user = await Auth.getUser();
      if (!user) {
        location.href = "/index.html";
        return;
      }

      await loadUserSettings();
      await loadProgressStats();
      setupEventListeners();
    })();

    let currentSettings = {
      goal: 'general',
      level: 'intermediate',
      schedule: 30,
      dailyReminders: true,
      progressTracking: true,
      audioPronunciation: true,
      simplifiedInterface: false
    };

    function setupEventListeners() {
      // Goal selection
      document.querySelectorAll('.goal-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.goal-option').forEach(opt => opt.classList.remove('selected'));
          option.classList.add('selected');
          currentSettings.goal = option.dataset.goal;
        });
      });

      // Level selection
      document.querySelectorAll('.level-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.level-option').forEach(opt => opt.classList.remove('selected'));
          option.classList.add('selected');
          currentSettings.level = option.dataset.level;
        });
      });

      // Schedule selection
      document.querySelectorAll('.schedule-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.schedule-option').forEach(opt => opt.classList.remove('selected'));
          option.classList.add('selected');
          currentSettings.schedule = parseInt(option.dataset.schedule);
        });
      });

      // Toggle switches
      document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', (e) => {
          const setting = e.target.id.replace(/-([a-z])/g, (g) => g[1].toUpperCase());
          currentSettings[setting] = e.target.checked;
        });
      });
    }

    async function loadUserSettings() {
      try {
        const user = await Auth.getUser();
        if (!user) return;

        // Load user practice settings from database
        const { data: settings } = await supabase
          .from('user_practice_settings')
          .select('*')
          .eq('user_id', user.id)
          .single();

        if (settings) {
          currentSettings = { ...currentSettings, ...settings.settings };
        }

        // Apply settings to UI
        applySettingsToUI();

      } catch (error) {
        console.log('No existing settings found, using defaults');
        applySettingsToUI();
      }
    }

    function applySettingsToUI() {
      // Apply goal selection
      document.querySelectorAll('.goal-option').forEach(option => {
        if (option.dataset.goal === currentSettings.goal) {
          option.classList.add('selected');
        }
      });

      // Apply level selection
      document.querySelectorAll('.level-option').forEach(option => {
        if (option.dataset.level === currentSettings.level) {
          option.classList.add('selected');
        }
      });

      // Apply schedule selection
      document.querySelectorAll('.schedule-option').forEach(option => {
        if (parseInt(option.dataset.schedule) === currentSettings.schedule) {
          option.classList.add('selected');
        }
      });

      // Apply toggle switches
      document.getElementById('daily-reminders').checked = currentSettings.dailyReminders;
      document.getElementById('progress-tracking').checked = currentSettings.progressTracking;
      document.getElementById('audio-pronunciation').checked = currentSettings.audioPronunciation;
      document.getElementById('simplified-interface').checked = currentSettings.simplifiedInterface;
    }

    async function loadProgressStats() {
      try {
        const user = await Auth.getUser();
        if (!user) return;

        // Load practice statistics
        const { data: stats } = await supabase
          .from('user_practice_stats')
          .select('*')
          .eq('user_id', user.id)
          .single();

        if (stats) {
          document.getElementById('days-practiced').textContent = stats.days_practiced || 0;
          document.getElementById('total-minutes').textContent = stats.total_minutes || 0;
          document.getElementById('current-streak').textContent = stats.current_streak || 0;
          document.getElementById('tools-completed').textContent = stats.tools_completed || 0;
        }

      } catch (error) {
        console.log('No practice stats found yet');
      }
    }

    async function saveSettings() {
      try {
        const user = await Auth.getUser();
        if (!user) return;

        // Create tables if they don't exist
        await createPracticeTablesIfNeeded();

        // Save settings to database
        const { error } = await supabase
          .from('user_practice_settings')
          .upsert({
            user_id: user.id,
            settings: currentSettings,
            updated_at: new Date().toISOString()
          });

        if (error) throw error;

        // Log activity
        await supabase
          .from('user_activities')
          .insert({
            user_id: user.id,
            activity_type: 'settings_updated',
            description: `Updated practice settings: ${currentSettings.goal} English, ${currentSettings.level} level, ${currentSettings.schedule} min/day`
          });

        showNotification('Settings saved successfully! üéâ', 'success');

        // Redirect to practice page after a short delay
        setTimeout(() => {
          window.location.href = '/practice.html';
        }, 2000);

      } catch (error) {
        console.error('Error saving settings:', error);
        showNotification('Failed to save settings. Please try again.', 'error');
      }
    }

    async function createPracticeTablesIfNeeded() {
      try {
        // Create user practice settings table
        await supabase.rpc('exec_sql', {
          sql: `
            CREATE TABLE IF NOT EXISTS user_practice_settings (
              id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
              user_id UUID REFERENCES auth.users(id) NOT NULL,
              settings JSONB NOT NULL,
              created_at TIMESTAMPTZ DEFAULT NOW(),
              updated_at TIMESTAMPTZ DEFAULT NOW(),
              UNIQUE(user_id)
            );

            CREATE TABLE IF NOT EXISTS user_practice_stats (
              id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
              user_id UUID REFERENCES auth.users(id) NOT NULL,
              days_practiced INTEGER DEFAULT 0,
              total_minutes INTEGER DEFAULT 0,
              current_streak INTEGER DEFAULT 0,
              tools_completed INTEGER DEFAULT 0,
              last_practice_date DATE,
              created_at TIMESTAMPTZ DEFAULT NOW(),
              updated_at TIMESTAMPTZ DEFAULT NOW(),
              UNIQUE(user_id)
            );

            -- Enable RLS
            ALTER TABLE user_practice_settings ENABLE ROW LEVEL SECURITY;
            ALTER TABLE user_practice_stats ENABLE ROW LEVEL SECURITY;

            -- Policies
            DROP POLICY IF EXISTS "user_practice_settings_own" ON user_practice_settings;
            CREATE POLICY "user_practice_settings_own" ON user_practice_settings
              FOR ALL USING (auth.uid() = user_id);

            DROP POLICY IF EXISTS "user_practice_stats_own" ON user_practice_stats;
            CREATE POLICY "user_practice_stats_own" ON user_practice_stats
              FOR ALL USING (auth.uid() = user_id);
          `
        });
      } catch (error) {
        console.log('Tables may already exist or RPC not available:', error);
      }
    }

    function resetSettings() {
      if (confirm('Are you sure you want to reset all settings to default?')) {
        currentSettings = {
          goal: 'general',
          level: 'intermediate',
          schedule: 30,
          dailyReminders: true,
          progressTracking: true,
          audioPronunciation: true,
          simplifiedInterface: false
        };
        
        applySettingsToUI();
        showNotification('Settings reset to default', 'success');
      }
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      // Trigger animation
      setTimeout(() => {
        notification.classList.add('show');
      }, 100);
      
      // Remove notification
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          if (document.body.contains(notification)) {
            document.body.removeChild(notification);
          }
        }, 300);
      }, 4000);
    }
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98a33b2c0088b9f0',t:'MTc1OTczMzQ5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
