<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Talk English - Perfect Your 3-Minute Pitch</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a3d2e 0%, #2d5a3d 100%);
            color: #f4f1e8;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 15px;
            border: 2px solid #d4af37;
        }

        .header h1 {
            color: #d4af37;
            margin: 0;
            font-size: 2.8rem;
            font-weight: 700;
        }

        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.2rem;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(26, 61, 46, 0.8);
            border-radius: 12px;
            padding: 8px;
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-tab {
            padding: 12px 18px;
            background: transparent;
            border: none;
            color: #f4f1e8;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            white-space: nowrap;
            font-size: 14px;
        }

        .nav-tab.active {
            background: #d4af37;
            color: #1a3d2e;
            font-weight: 600;
        }

        .nav-tab:hover:not(.active) {
            background: rgba(212, 175, 55, 0.2);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: rgba(26, 61, 46, 0.9);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .card h3 {
            color: #d4af37;
            margin-top: 0;
            font-size: 1.4rem;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 10px;
        }

        .btn {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: #1a3d2e;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
            font-size: 14px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.4);
        }

        .btn-secondary {
            background: rgba(212, 175, 55, 0.2);
            color: #d4af37;
            border: 1px solid #d4af37;
        }

        .btn-danger {
            background: linear-gradient(135deg, #c53030 0%, #9c2626 100%);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #d4af37;
            font-weight: 500;
        }

        .input-group input, .input-group textarea, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            background: rgba(26, 61, 46, 0.8);
            color: #f4f1e8;
            font-size: 16px;
            box-sizing: border-box;
        }

        .input-group input:focus, .input-group textarea:focus, .input-group select:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }

        .pitch-builder {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .pitch-section {
            background: rgba(45, 90, 61, 0.8);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #d4af37;
        }

        .pitch-section h4 {
            color: #d4af37;
            margin-top: 0;
            font-size: 1.2rem;
        }

        .slide-preview {
            background: #f4f1e8;
            color: #1a3d2e;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            min-height: 200px;
            border: 2px solid #d4af37;
        }

        .slide-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #1a3d2e;
            margin-bottom: 15px;
            text-align: center;
        }

        .slide-content {
            font-size: 1rem;
            line-height: 1.6;
        }

        .presenter-notes {
            background: rgba(212, 175, 55, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #d4af37;
        }

        .timer-display {
            font-size: 4rem;
            text-align: center;
            color: #d4af37;
            font-weight: bold;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .timer-controls {
            text-align: center;
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: rgba(26, 61, 46, 0.8);
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #d4af37 0%, #b8941f 100%);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a3d2e;
            font-weight: bold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(45, 90, 61, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .stat-number {
            font-size: 2.5rem;
            color: #d4af37;
            font-weight: bold;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #1a3d2e;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            border: 2px solid #d4af37;
            max-height: 80vh;
            overflow-y: auto;
        }

        .voice-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .recording-indicator {
            width: 12px;
            height: 12px;
            background: #ff4444;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .vocabulary-word {
            background: rgba(212, 175, 55, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #d4af37;
        }

        .word-term {
            font-weight: bold;
            color: #d4af37;
            font-size: 1.1rem;
        }

        .word-definition {
            margin-top: 5px;
            opacity: 0.9;
        }

        .breathing-circle {
            width: 200px;
            height: 200px;
            border: 4px solid #d4af37;
            border-radius: 50%;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: transform 4s ease-in-out;
        }

        .breathing-circle.inhale {
            transform: scale(1.3);
        }

        .breathing-circle.exhale {
            transform: scale(0.8);
        }

        .pitch-list {
            display: grid;
            gap: 15px;
        }

        .pitch-item {
            background: rgba(45, 90, 61, 0.8);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #d4af37;
        }

        .pitch-item h4 {
            color: #d4af37;
            margin: 0 0 10px 0;
        }

        .pitch-meta {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .slide-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .slide-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(212, 175, 55, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slide-indicator.active {
            background: #d4af37;
            transform: scale(1.2);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .nav-tab {
                width: 100%;
                text-align: center;
            }
            
            .pitch-builder {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .timer-display {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Research Talk English</h1>
            <p>Transform your research into compelling 3-minute pitches</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('builder')">Pitch Builder</button>
            <button class="nav-tab" onclick="showTab('slides')">Auto Slides</button>
            <button class="nav-tab" onclick="showTab('practice')">Practice Mode</button>
            <button class="nav-tab" onclick="showTab('library')">Pitch Library</button>
            <button class="nav-tab" onclick="showTab('vocabulary')">Vocabulary</button>
            <button class="nav-tab" onclick="showTab('breathing')">Focus Reset</button>
            <button class="nav-tab" onclick="showTab('analytics')">Analytics</button>
            <button class="nav-tab" onclick="showTab('settings')">Settings</button>
        </div>

        <!-- Pitch Builder Tab -->
        <div id="builder" class="tab-content active">
            <div class="card">
                <h3>🔬 Create New Research Pitch</h3>
                <div class="input-group">
                    <label>Research Title:</label>
                    <input type="text" id="pitchTitle" placeholder="Enter your research title...">
                </div>
                <div class="voice-controls">
                    <button class="btn btn-secondary" onclick="startVoiceInput('pitchTitle')">🎤 Voice Input</button>
                    <button class="btn btn-secondary" onclick="quickAdd()">⚡ Quick Add</button>
                    <div id="recordingIndicator" class="recording-indicator" style="display: none;"></div>
                </div>
            </div>

            <div class="pitch-builder">
                <div class="pitch-section">
                    <h4>🎯 Problem (30 seconds)</h4>
                    <div class="input-group">
                        <label>What problem does your research address?</label>
                        <textarea id="problemText" rows="4" placeholder="Describe the key problem or gap in knowledge..."></textarea>
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="startVoiceInput('problemText')">🎤 Voice</button>
                    <button class="btn btn-secondary btn-small" onclick="generateSuggestion('problem')">💡 Suggest</button>
                </div>

                <div class="pitch-section">
                    <h4>🔬 Method (45 seconds)</h4>
                    <div class="input-group">
                        <label>How did you approach this problem?</label>
                        <textarea id="methodText" rows="4" placeholder="Describe your methodology and approach..."></textarea>
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="startVoiceInput('methodText')">🎤 Voice</button>
                    <button class="btn btn-secondary btn-small" onclick="generateSuggestion('method')">💡 Suggest</button>
                </div>

                <div class="pitch-section">
                    <h4>📊 Results (60 seconds)</h4>
                    <div class="input-group">
                        <label>What did you discover?</label>
                        <textarea id="resultsText" rows="4" placeholder="Highlight your key findings and results..."></textarea>
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="startVoiceInput('resultsText')">🎤 Voice</button>
                    <button class="btn btn-secondary btn-small" onclick="generateSuggestion('results')">💡 Suggest</button>
                </div>

                <div class="pitch-section">
                    <h4>🌍 Impact (45 seconds)</h4>
                    <div class="input-group">
                        <label>Why does this matter?</label>
                        <textarea id="impactText" rows="4" placeholder="Explain the significance and implications..."></textarea>
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="startVoiceInput('impactText')">🎤 Voice</button>
                    <button class="btn btn-secondary btn-small" onclick="generateSuggestion('impact')">💡 Suggest</button>
                </div>
            </div>

            <div class="card">
                <div style="text-align: center;">
                    <button class="btn" onclick="generateSlides()">🎨 Generate Auto Slides</button>
                    <button class="btn btn-secondary" onclick="savePitch()">💾 Save Pitch</button>
                    <button class="btn btn-secondary" onclick="previewPitch()">👁️ Preview</button>
                </div>
            </div>
        </div>

        <!-- Auto Slides Tab -->
        <div id="slides" class="tab-content">
            <div class="card">
                <h3>🎨 Auto-Generated Slides</h3>
                <div class="slide-navigation">
                    <div class="slide-indicator active" onclick="showSlide(0)"></div>
                    <div class="slide-indicator" onclick="showSlide(1)"></div>
                    <div class="slide-indicator" onclick="showSlide(2)"></div>
                    <div class="slide-indicator" onclick="showSlide(3)"></div>
                    <div class="slide-indicator" onclick="showSlide(4)"></div>
                </div>
                
                <div id="slideContainer">
                    <div class="slide-preview" id="slide0">
                        <div class="slide-title">Research Title Slide</div>
                        <div class="slide-content">
                            <h3 id="slideTitle">Your Research Title Here</h3>
                            <p><strong>Presenter:</strong> Your Name</p>
                            <p><strong>Institution:</strong> Your Institution</p>
                            <p><strong>Date:</strong> <span id="currentDate"></span></p>
                        </div>
                    </div>
                </div>

                <div class="presenter-notes">
                    <h4>📝 Presenter Notes</h4>
                    <div id="presenterNotes">
                        <p><strong>Opening (10 seconds):</strong> Introduce yourself confidently and state your research title clearly. Make eye contact with the audience.</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="previousSlide()">← Previous</button>
                    <button class="btn" onclick="nextSlide()">Next →</button>
                    <button class="btn btn-secondary" onclick="exportSlides()">📄 Export PDF</button>
                </div>
            </div>
        </div>

        <!-- Practice Mode Tab -->
        <div id="practice" class="tab-content">
            <div class="card">
                <h3>🎤 Practice Your Pitch</h3>
                <div class="timer-display" id="practiceTimer">3:00</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="timeProgress" style="width: 0%">0%</div>
                </div>
                <div class="timer-controls">
                    <button class="btn" onclick="startPractice()">▶️ Start Practice</button>
                    <button class="btn btn-secondary" onclick="pausePractice()">⏸️ Pause</button>
                    <button class="btn btn-secondary" onclick="resetPractice()">🔄 Reset</button>
                    <button class="btn btn-secondary" onclick="recordPractice()">🎤 Record</button>
                </div>
            </div>

            <div class="card">
                <h3>📋 Current Section</h3>
                <div id="currentSection">
                    <h4 style="color: #d4af37;">🎯 Problem Section (0:00 - 0:30)</h4>
                    <p id="sectionContent">Start by clearly stating the problem your research addresses...</p>
                    <div class="presenter-notes">
                        <strong>Key phrases to use:</strong> "The critical challenge is...", "Current research gaps include...", "This problem matters because..."
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>🎯 Practice Feedback</h3>
                <div id="practiceStats">
                    <p><strong>Last Practice:</strong> 3:15 (15 seconds over)</p>
                    <p><strong>Section Timing:</strong></p>
                    <ul>
                        <li>Problem: 35s (5s over target)</li>
                        <li>Method: 42s (3s under target)</li>
                        <li>Results: 68s (8s over target)</li>
                        <li>Impact: 50s (5s over target)</li>
                    </ul>
                    <p><strong>Suggestion:</strong> Trim your results section and problem introduction for better timing.</p>
                </div>
            </div>
        </div>

        <!-- Pitch Library Tab -->
        <div id="library" class="tab-content">
            <div class="card">
                <h3>📚 Your Pitch Library</h3>
                <div class="pitch-list" id="pitchList">
                    <div class="pitch-item">
                        <h4>Machine Learning for Climate Prediction</h4>
                        <div class="pitch-meta">Created: 2024-01-15 | Last practiced: 2024-01-20 | Duration: 2:58</div>
                        <p>Advanced neural networks for improving long-term climate forecasting accuracy...</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-small" onclick="editPitch(0)">✏️ Edit</button>
                            <button class="btn btn-secondary btn-small" onclick="practicePitch(0)">🎤 Practice</button>
                            <button class="btn btn-secondary btn-small" onclick="duplicatePitch(0)">📋 Duplicate</button>
                            <button class="btn btn-danger btn-small" onclick="deletePitch(0)">🗑️ Delete</button>
                        </div>
                    </div>
                    
                    <div class="pitch-item">
                        <h4>Quantum Computing Applications in Drug Discovery</h4>
                        <div class="pitch-meta">Created: 2024-01-10 | Last practiced: 2024-01-18 | Duration: 3:05</div>
                        <p>Leveraging quantum algorithms to accelerate pharmaceutical research...</p>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-small" onclick="editPitch(1)">✏️ Edit</button>
                            <button class="btn btn-secondary btn-small" onclick="practicePitch(1)">🎤 Practice</button>
                            <button class="btn btn-secondary btn-small" onclick="duplicatePitch(1)">📋 Duplicate</button>
                            <button class="btn btn-danger btn-small" onclick="deletePitch(1)">🗑️ Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vocabulary Tab -->
        <div id="vocabulary" class="tab-content">
            <div class="card">
                <h3>📖 Research Presentation Vocabulary</h3>
                <button class="btn" onclick="generateVocabulary()">🎲 Generate Random Terms</button>
                <div id="vocabularyList"></div>
            </div>

            <div class="card">
                <h3>💬 Key Presentation Phrases</h3>
                <div id="phrasesList"></div>
            </div>
        </div>

        <!-- Breathing Tab -->
        <div id="breathing" class="tab-content">
            <div class="card">
                <h3>🧘 25-Minute Focus Reset</h3>
                <div class="breathing-circle" id="breathingCircle">
                    <span id="breathingText">Ready to begin</span>
                </div>
                <div class="timer-display" id="breathingTimer">25:00</div>
                <div style="text-align: center;">
                    <button class="btn" onclick="startBreathing()">Start Session</button>
                    <button class="btn btn-secondary" onclick="pauseBreathing()">Pause</button>
                    <button class="btn btn-secondary" onclick="resetBreathing()">Reset</button>
                </div>
                <div id="motivationalMessage" style="text-align: center; margin-top: 20px; font-style: italic; color: #d4af37;"></div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <div class="card">
                <h3>📊 Practice Analytics</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="streakCount">12</div>
                        <div>Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pitchesCreated">8</div>
                        <div>Pitches Created</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="practiceTime">24.5</div>
                        <div>Hours Practiced</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgTiming">2:58</div>
                        <div>Avg Timing</div>
                    </div>
                </div>
                
                <h4 style="color: #d4af37;">Weekly Progress</h4>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 85%">85%</div>
                </div>
                <p>85% of weekly practice goal completed</p>

                <div style="margin-top: 30px;">
                    <button class="btn" onclick="exportAnalytics()">📄 Export Report</button>
                    <button class="btn btn-secondary" onclick="backupData()">💾 Backup Data</button>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="card">
                <h3>⚙️ App Settings</h3>
                <div class="input-group">
                    <label>
                        <input type="checkbox" id="offlineMode" checked> Enable Offline Mode
                    </label>
                </div>
                <div class="input-group">
                    <label>
                        <input type="checkbox" id="autoSync" checked> Auto-sync when online
                    </label>
                </div>
                <div class="input-group">
                    <label>
                        <input type="checkbox" id="motivationalPopups" checked> Show motivational messages
                    </label>
                </div>
                <div class="input-group">
                    <label>Target Pitch Duration (seconds):</label>
                    <input type="number" id="targetDuration" value="180" min="120" max="300">
                </div>
                <button class="btn" onclick="saveSettings()">Save Settings</button>
            </div>

            <div class="card">
                <h3>🎤 Recording Settings</h3>
                <div class="input-group">
                    <label>
                        <input type="checkbox" id="saveRecordings" checked> Save practice recordings
                    </label>
                </div>
                <div class="input-group">
                    <label>
                        <input type="checkbox" id="saveTranscripts" checked> Save transcripts
                    </label>
                </div>
                <button class="btn btn-secondary" onclick="viewRecordings()">📁 View Recordings</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">Modal Title</h3>
            <div id="modalBody">Modal content goes here</div>
            <button class="btn" onclick="closeModal()">Close</button>
        </div>
    </div>

    <script>
        // App State
        let currentSlide = 0;
        let practiceTimer = null;
        let practiceTimeLeft = 180; // 3 minutes
        let isPracticing = false;
        let isRecording = false;
        let breathingTimer = null;
        let breathingTimeLeft = 1500; // 25 minutes
        let isBreathing = false;
        let mediaRecorder = null;
        let recordedChunks = [];

        // Research Vocabulary Bank
        const researchVocabulary = [
            { term: "Methodology", definition: "The systematic approach and procedures used in research" },
            { term: "Hypothesis", definition: "A testable prediction or explanation for observed phenomena" },
            { term: "Empirical", definition: "Based on observation, experience, or experiment rather than theory" },
            { term: "Paradigm", definition: "A conceptual framework or model that guides research" },
            { term: "Correlation", definition: "A statistical relationship between two or more variables" },
            { term: "Causation", definition: "A relationship where one event directly causes another" },
            { term: "Validity", definition: "The extent to which research measures what it claims to measure" },
            { term: "Reliability", definition: "The consistency and repeatability of research results" },
            { term: "Significance", definition: "The importance or meaning of research findings" },
            { term: "Implications", definition: "The potential consequences or applications of research results" }
        ];

        // Presentation Phrases
        const presentationPhrases = [
            "Our research addresses a critical gap in...",
            "The key innovation of our approach is...",
            "These findings have significant implications for...",
            "Our methodology builds upon previous work by...",
            "The results demonstrate a clear relationship between...",
            "This research contributes to the field by...",
            "Future directions include investigating...",
            "The practical applications of this work extend to...",
            "Our data provides compelling evidence that...",
            "This study challenges the conventional understanding of..."
        ];

        // Motivational Messages
        const motivationalMessages = [
            "Great research deserves great presentation! Keep refining your pitch! 🎯",
            "Every expert was once a beginner. Your presentation skills are improving! 💪",
            "Clear communication amplifies brilliant research. You're doing amazing! 🌟",
            "Practice makes perfect pitches. Keep up the excellent work! 🎤",
            "Your research has the power to change the world. Present it with confidence! 🌍",
            "Compelling presentations open doors to new opportunities! 🚪",
            "The best researchers are also great communicators. You're becoming both! 📚",
            "Your dedication to clear communication will set you apart! ⭐"
        ];

        // Slide Templates
        const slideTemplates = {
            title: {
                title: "Research Title",
                content: "Your research title, name, institution, and date"
            },
            problem: {
                title: "The Problem",
                content: "What challenge or gap does your research address?"
            },
            method: {
                title: "Our Approach",
                content: "How did you tackle this problem?"
            },
            results: {
                title: "Key Findings",
                content: "What did you discover?"
            },
            impact: {
                title: "Why It Matters",
                content: "The significance and implications of your work"
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString();
            generateVocabulary();
            loadPhrases();
            loadSettings();
            showRandomMotivation();
            
            // Show motivational message every 15 minutes
            setInterval(showRandomMotivation, 900000);
        });

        // Tab Management
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Pitch Builder Functions
        function quickAdd() {
            const templates = {
                problem: "Current research in this field faces significant challenges in...",
                method: "We developed a novel approach that combines...",
                results: "Our findings reveal that...",
                impact: "These results have important implications for..."
            };
            
            if (!document.getElementById('problemText').value) {
                document.getElementById('problemText').value = templates.problem;
            }
            if (!document.getElementById('methodText').value) {
                document.getElementById('methodText').value = templates.method;
            }
            if (!document.getElementById('resultsText').value) {
                document.getElementById('resultsText').value = templates.results;
            }
            if (!document.getElementById('impactText').value) {
                document.getElementById('impactText').value = templates.impact;
            }
        }

        function generateSuggestion(section) {
            const suggestions = {
                problem: [
                    "Current approaches to this challenge are limited by...",
                    "Despite significant research, the field still lacks...",
                    "This problem affects millions of people because...",
                    "Existing solutions fail to address the root cause of..."
                ],
                method: [
                    "We employed a mixed-methods approach combining...",
                    "Our innovative methodology leverages...",
                    "We developed a novel framework that integrates...",
                    "Using advanced computational techniques, we..."
                ],
                results: [
                    "Our analysis revealed a significant correlation between...",
                    "The data demonstrates a clear pattern showing...",
                    "We observed a 40% improvement in...",
                    "Statistical analysis confirmed our hypothesis that..."
                ],
                impact: [
                    "These findings could revolutionize how we approach...",
                    "The implications extend beyond academia to real-world applications in...",
                    "This research opens new avenues for investigating...",
                    "The potential benefits for society include..."
                ]
            };
            
            const randomSuggestion = suggestions[section][Math.floor(Math.random() * suggestions[section].length)];
            const textArea = document.getElementById(section + 'Text');
            
            if (textArea.value.trim() === '') {
                textArea.value = randomSuggestion;
            } else {
                textArea.value += ' ' + randomSuggestion;
            }
        }

        function generateSlides() {
            const title = document.getElementById('pitchTitle').value || 'Your Research Title';
            const problem = document.getElementById('problemText').value;
            const method = document.getElementById('methodText').value;
            const results = document.getElementById('resultsText').value;
            const impact = document.getElementById('impactText').value;
            
            if (!problem || !method || !results || !impact) {
                alert('Please fill in all sections before generating slides.');
                return;
            }
            
            // Update slide title
            document.getElementById('slideTitle').textContent = title;
            
            // Store slide content for navigation
            window.slideContent = [
                {
                    title: title,
                    content: `<h3>${title}</h3><p><strong>Presenter:</strong> Your Name</p><p><strong>Institution:</strong> Your Institution</p><p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>`,
                    notes: "Opening (10 seconds): Introduce yourself confidently and state your research title clearly. Make eye contact with the audience."
                },
                {
                    title: "The Problem",
                    content: `<h3>The Problem</h3><div class="slide-content">${problem}</div>`,
                    notes: "Problem Section (30 seconds): Clearly articulate the challenge. Use phrases like 'The critical issue is...' or 'Current research gaps include...'"
                },
                {
                    title: "Our Approach",
                    content: `<h3>Our Approach</h3><div class="slide-content">${method}</div>`,
                    notes: "Method Section (45 seconds): Explain your methodology concisely. Focus on what makes your approach unique or innovative."
                },
                {
                    title: "Key Findings",
                    content: `<h3>Key Findings</h3><div class="slide-content">${results}</div>`,
                    notes: "Results Section (60 seconds): Present your most important findings. Use specific numbers and clear statements about what you discovered."
                },
                {
                    title: "Why It Matters",
                    content: `<h3>Why It Matters</h3><div class="slide-content">${impact}</div>`,
                    notes: "Impact Section (45 seconds): Connect your research to broader implications. Explain why your audience should care about these results."
                }
            ];
            
            showTab('slides');
            showSlide(0);
            alert('Slides generated successfully! Navigate to the Auto Slides tab to view them.');
        }

        function savePitch() {
            const title = document.getElementById('pitchTitle').value;
            const problem = document.getElementById('problemText').value;
            const method = document.getElementById('methodText').value;
            const results = document.getElementById('resultsText').value;
            const impact = document.getElementById('impactText').value;
            
            if (!title || !problem || !method || !results || !impact) {
                alert('Please fill in all fields before saving.');
                return;
            }
            
            const pitch = {
                title,
                problem,
                method,
                results,
                impact,
                created: new Date().toISOString(),
                lastPracticed: null
            };
            
            // In a real app, this would save to localStorage or server
            alert('Pitch saved successfully!');
        }

        function previewPitch() {
            const title = document.getElementById('pitchTitle').value || 'Untitled Research';
            const problem = document.getElementById('problemText').value;
            const method = document.getElementById('methodText').value;
            const results = document.getElementById('resultsText').value;
            const impact = document.getElementById('impactText').value;
            
            showModal('Pitch Preview', `
                <h4>${title}</h4>
                <div style="margin: 20px 0;">
                    <h5 style="color: #d4af37;">🎯 Problem (30s)</h5>
                    <p>${problem || 'Not yet defined'}</p>
                    
                    <h5 style="color: #d4af37;">🔬 Method (45s)</h5>
                    <p>${method || 'Not yet defined'}</p>
                    
                    <h5 style="color: #d4af37;">📊 Results (60s)</h5>
                    <p>${results || 'Not yet defined'}</p>
                    
                    <h5 style="color: #d4af37;">🌍 Impact (45s)</h5>
                    <p>${impact || 'Not yet defined'}</p>
                </div>
                <p><strong>Total Target Time:</strong> 3 minutes</p>
            `);
        }

        // Slide Navigation
        function showSlide(index) {
            if (!window.slideContent || index >= window.slideContent.length) return;
            
            currentSlide = index;
            const slide = window.slideContent[index];
            
            document.getElementById('slideContainer').innerHTML = `
                <div class="slide-preview">
                    <div class="slide-title">${slide.title}</div>
                    <div class="slide-content">${slide.content}</div>
                </div>
            `;
            
            document.getElementById('presenterNotes').innerHTML = `
                <h4>📝 Presenter Notes</h4>
                <p>${slide.notes}</p>
            `;
            
            // Update slide indicators
            document.querySelectorAll('.slide-indicator').forEach((indicator, i) => {
                indicator.classList.toggle('active', i === index);
            });
        }

        function nextSlide() {
            if (window.slideContent && currentSlide < window.slideContent.length - 1) {
                showSlide(currentSlide + 1);
            }
        }

        function previousSlide() {
            if (currentSlide > 0) {
                showSlide(currentSlide - 1);
            }
        }

        function exportSlides() {
            showModal('Export Slides', `
                <p>📄 Slide Export Options</p>
                <p>Your presentation slides are ready for export:</p>
                <ul>
                    <li>5 professionally formatted slides</li>
                    <li>Presenter notes included</li>
                    <li>Optimized for 3-minute presentation</li>
                </ul>
                <p><em>In a full implementation, this would generate and download a PDF presentation.</em></p>
            `);
        }

        // Practice Mode Functions
        function startPractice() {
            if (isPracticing) return;
            
            isPracticing = true;
            practiceTimer = setInterval(() => {
                practiceTimeLeft--;
                updatePracticeDisplay();
                
                if (practiceTimeLeft <= 0) {
                    resetPractice();
                    alert('Time\'s up! Great job completing your 3-minute pitch!');
                }
            }, 1000);
            
            updateCurrentSection();
        }

        function pausePractice() {
            isPracticing = false;
            if (practiceTimer) {
                clearInterval(practiceTimer);
                practiceTimer = null;
            }
        }

        function resetPractice() {
            isPracticing = false;
            practiceTimeLeft = parseInt(document.getElementById('targetDuration').value) || 180;
            if (practiceTimer) {
                clearInterval(practiceTimer);
                practiceTimer = null;
            }
            updatePracticeDisplay();
            updateCurrentSection();
        }

        function updatePracticeDisplay() {
            const minutes = Math.floor(practiceTimeLeft / 60);
            const seconds = practiceTimeLeft % 60;
            document.getElementById('practiceTimer').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            const totalTime = parseInt(document.getElementById('targetDuration').value) || 180;
            const progress = ((totalTime - practiceTimeLeft) / totalTime) * 100;
            const progressFill = document.getElementById('timeProgress');
            progressFill.style.width = `${progress}%`;
            progressFill.textContent = `${Math.round(progress)}%`;
        }

        function updateCurrentSection() {
            const totalTime = parseInt(document.getElementById('targetDuration').value) || 180;
            const elapsed = totalTime - practiceTimeLeft;
            
            let section, content, timing;
            
            if (elapsed < 30) {
                section = "🎯 Problem Section (0:00 - 0:30)";
                content = "Start by clearly stating the problem your research addresses. Make it compelling and relatable.";
                timing = "problem";
            } else if (elapsed < 75) {
                section = "🔬 Method Section (0:30 - 1:15)";
                content = "Explain your approach and methodology. Focus on what makes it innovative or effective.";
                timing = "method";
            } else if (elapsed < 135) {
                section = "📊 Results Section (1:15 - 2:15)";
                content = "Present your key findings clearly. Use specific data and highlight the most important discoveries.";
                timing = "results";
            } else {
                section = "🌍 Impact Section (2:15 - 3:00)";
                content = "Conclude with the significance and implications of your work. Why should the audience care?";
                timing = "impact";
            }
            
            document.querySelector('#currentSection h4').textContent = section;
            document.getElementById('sectionContent').textContent = content;
        }

        function recordPractice() {
            startVoiceInput('practice');
        }

        // Voice Input Functions
        async function startVoiceInput(targetId) {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                alert('Voice input is not supported in your browser.');
                return;
            }
            
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                recordedChunks = [];
                
                mediaRecorder.ondataavailable = event => {
                    if (event.data.size > 0) {
                        recordedChunks.push(event.data);
                    }
                };
                
                mediaRecorder.onstop = () => {
                    const blob = new Blob(recordedChunks, { type: 'audio/webm' });
                    const url = URL.createObjectURL(blob);
                    
                    if (targetId === 'practice') {
                        showModal('Practice Recording', `
                            <p>🎤 Practice session recorded!</p>
                            <audio controls src="${url}"></audio>
                            <p><strong>Duration:</strong> ${Math.round(recordedChunks.length / 10)} seconds</p>
                            <p><em>Recording saved for review and analysis.</em></p>
                        `);
                    } else {
                        showModal('Voice Input', `
                            <p>🎤 Voice input recorded!</p>
                            <audio controls src="${url}"></audio>
                            <p><em>In a full implementation, this would be transcribed to text and inserted into the ${targetId} field.</em></p>
                        `);
                    }
                };
                
                mediaRecorder.start();
                isRecording = true;
                document.getElementById('recordingIndicator').style.display = 'block';
                
                setTimeout(() => {
                    if (isRecording) {
                        stopRecording();
                    }
                }, 60000); // Auto-stop after 1 minute
                
            } catch (error) {
                alert('Could not access microphone. Please check permissions.');
            }
        }

        function stopRecording() {
            if (mediaRecorder && isRecording) {
                mediaRecorder.stop();
                isRecording = false;
                document.getElementById('recordingIndicator').style.display = 'none';
                
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
        }

        // Library Functions
        function editPitch(index) {
            alert(`Editing pitch ${index + 1}. In a full implementation, this would load the pitch data into the builder.`);
            showTab('builder');
        }

        function practicePitch(index) {
            alert(`Starting practice for pitch ${index + 1}.`);
            showTab('practice');
        }

        function duplicatePitch(index) {
            alert(`Pitch ${index + 1} duplicated successfully!`);
        }

        function deletePitch(index) {
            if (confirm('Are you sure you want to delete this pitch?')) {
                alert(`Pitch ${index + 1} deleted.`);
            }
        }

        // Vocabulary Functions
        function generateVocabulary() {
            const vocabularyList = document.getElementById('vocabularyList');
            const shuffled = [...researchVocabulary].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 5);
            
            vocabularyList.innerHTML = '';
            selected.forEach(word => {
                const wordDiv = document.createElement('div');
                wordDiv.className = 'vocabulary-word';
                wordDiv.innerHTML = `
                    <div class="word-term">${word.term}</div>
                    <div class="word-definition">${word.definition}</div>
                `;
                vocabularyList.appendChild(wordDiv);
            });
        }

        function loadPhrases() {
            const phrasesList = document.getElementById('phrasesList');
            const shuffled = [...presentationPhrases].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 5);
            
            phrasesList.innerHTML = '';
            selected.forEach(phrase => {
                const phraseDiv = document.createElement('div');
                phraseDiv.className = 'vocabulary-word';
                phraseDiv.innerHTML = `<div class="word-definition">"${phrase}"</div>`;
                phrasesList.appendChild(phraseDiv);
            });
        }

        // Breathing Exercise Functions
        function startBreathing() {
            if (isBreathing) return;
            
            isBreathing = true;
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const timer = document.getElementById('breathingTimer');
            
            breathingTimer = setInterval(() => {
                breathingTimeLeft--;
                const minutes = Math.floor(breathingTimeLeft / 60);
                const seconds = breathingTimeLeft % 60;
                timer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (breathingTimeLeft <= 0) {
                    resetBreathing();
                    showRandomMotivation();
                }
            }, 1000);
            
            let breathingCycle = setInterval(() => {
                if (!isBreathing) {
                    clearInterval(breathingCycle);
                    return;
                }
                
                circle.classList.add('inhale');
                text.textContent = 'Breathe in...';
                
                setTimeout(() => {
                    if (!isBreathing) return;
                    circle.classList.remove('inhale');
                    circle.classList.add('exhale');
                    text.textContent = 'Breathe out...';
                }, 4000);
                
                setTimeout(() => {
                    if (!isBreathing) return;
                    circle.classList.remove('exhale');
                }, 8000);
            }, 8000);
        }

        function pauseBreathing() {
            isBreathing = false;
            if (breathingTimer) {
                clearInterval(breathingTimer);
                breathingTimer = null;
            }
            document.getElementById('breathingText').textContent = 'Paused';
        }

        function resetBreathing() {
            isBreathing = false;
            breathingTimeLeft = 1500;
            if (breathingTimer) {
                clearInterval(breathingTimer);
                breathingTimer = null;
            }
            
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const timer = document.getElementById('breathingTimer');
            
            circle.classList.remove('inhale', 'exhale');
            text.textContent = 'Ready to begin';
            timer.textContent = '25:00';
        }

        // Utility Functions
        function showModal(title, content) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = content;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function showRandomMotivation() {
            if (!document.getElementById('motivationalPopups')?.checked) return;
            
            const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
            document.getElementById('motivationalMessage').textContent = message;
            
            setTimeout(() => {
                document.getElementById('motivationalMessage').textContent = '';
            }, 5000);
        }

        // Settings and Data Management
        function saveSettings() {
            const settings = {
                offlineMode: document.getElementById('offlineMode').checked,
                autoSync: document.getElementById('autoSync').checked,
                motivationalPopups: document.getElementById('motivationalPopups').checked,
                targetDuration: document.getElementById('targetDuration').value,
                saveRecordings: document.getElementById('saveRecordings').checked,
                saveTranscripts: document.getElementById('saveTranscripts').checked
            };
            
            localStorage.setItem('researchTalkSettings', JSON.stringify(settings));
            alert('Settings saved successfully!');
        }

        function loadSettings() {
            const saved = localStorage.getItem('researchTalkSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                document.getElementById('offlineMode').checked = settings.offlineMode ?? true;
                document.getElementById('autoSync').checked = settings.autoSync ?? true;
                document.getElementById('motivationalPopups').checked = settings.motivationalPopups ?? true;
                document.getElementById('targetDuration').value = settings.targetDuration ?? 180;
                document.getElementById('saveRecordings').checked = settings.saveRecordings ?? true;
                document.getElementById('saveTranscripts').checked = settings.saveTranscripts ?? true;
            }
        }

        function exportAnalytics() {
            showModal('Analytics Export', `
                <p>📊 Practice Analytics Report</p>
                <p><strong>Practice Streak:</strong> 12 days</p>
                <p><strong>Total Pitches:</strong> 8</p>
                <p><strong>Practice Time:</strong> 24.5 hours</p>
                <p><strong>Average Timing:</strong> 2:58</p>
                <p><strong>Best Performance:</strong> 2:45 (15s under target)</p>
                <p><strong>Areas for Improvement:</strong> Results section timing</p>
                <p><em>In a full implementation, this would generate a detailed PDF report.</em></p>
            `);
        }

        function backupData() {
            const data = {
                pitches: [], // Would contain saved pitches
                settings: JSON.parse(localStorage.getItem('researchTalkSettings') || '{}'),
                analytics: {
                    streak: 12,
                    totalPitches: 8,
                    practiceTime: 24.5
                },
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `research-talk-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function viewRecordings() {
            showModal('Saved Recordings', `
                <p>🎤 Recording Library</p>
                <div style="margin: 15px 0;">
                    <div style="padding: 10px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; margin: 5px 0;">
                        🎤 ML Climate Prediction Pitch - 2:58 - 2024-01-20
                    </div>
                    <div style="padding: 10px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; margin: 5px 0;">
                        🎤 Quantum Drug Discovery Practice - 3:05 - 2024-01-18
                    </div>
                    <div style="padding: 10px; background: rgba(212, 175, 55, 0.1); border-radius: 5px; margin: 5px 0;">
                        🎤 Problem Section Practice - 0:32 - 2024-01-17
                    </div>
                </div>
                <p><em>In a full implementation, recordings would be playable with transcript viewing options.</em></p>
            `);
        }

        // Close modal when clicking outside
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Auto-stop recording when clicking elsewhere
        document.addEventListener('click', function(e) {
            if (isRecording && !e.target.closest('.voice-controls')) {
                stopRecording();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9881839886f5fee5',t:'MTc1OTM3OTk0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
