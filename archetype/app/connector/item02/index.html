<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Balance - Energy & Engagement Tracker</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0d2818 0%, #1a4d32 25%, #2d5a3d 50%, #1a4d32 75%, #0d2818 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(26, 77, 50, 0.5) 50%, rgba(45, 90, 61, 0.3) 100%);
            border-radius: 20px;
            border: 3px solid #d4af37;
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.4);
        }

        .header h1 {
            margin: 0;
            font-size: 2.8rem;
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 30%, #b8860b 70%, #d4af37 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header p {
            margin: 15px 0 0 0;
            font-size: 1.2rem;
            color: #e8f5e8;
            opacity: 0.9;
        }

        .energy-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .energy-card {
            background: linear-gradient(135deg, rgba(26, 77, 50, 0.8) 0%, rgba(45, 90, 61, 0.6) 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #2d5a3d;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .energy-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .energy-card:hover::before {
            left: 100%;
        }

        .energy-card:hover {
            border-color: #d4af37;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }

        .energy-level {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .energy-value {
            font-size: 2rem;
            font-weight: 700;
            color: #d4af37;
            margin-bottom: 8px;
        }

        .energy-label {
            color: #e8f5e8;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .energy-sublabel {
            color: #b8d4b8;
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .main-dashboard {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 25px;
            margin-bottom: 30px;
        }

        .dashboard-left {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .interaction-log {
            background: linear-gradient(135deg, rgba(248, 250, 248, 0.98) 0%, rgba(230, 243, 230, 0.98) 100%);
            border-radius: 15px;
            border: 3px solid #d4af37;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #2d5a3d;
        }

        .section-title {
            color: #1a4d32;
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .add-interaction-btn {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a4d32;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .add-interaction-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .interaction-item {
            background: #ffffff;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative;
        }

        .interaction-item:hover {
            border-color: #d4af37;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .interaction-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .interaction-type {
            background: linear-gradient(135deg, #2d5a3d 0%, #1a4d32 100%);
            color: #ffffff;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 8px;
            display: inline-block;
        }

        .interaction-title {
            color: #1a4d32;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .interaction-details {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .interaction-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #888;
        }

        .energy-impact {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }

        .impact-positive { color: #2d5a3d; }
        .impact-neutral { color: #b8860b; }
        .impact-draining { color: #cd853f; }

        .delete-btn {
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.3s ease;
            padding: 4px;
            border-radius: 4px;
        }

        .delete-btn:hover {
            opacity: 1;
            background: rgba(205, 133, 63, 0.2);
            transform: scale(1.1);
        }

        .add-suggestion-btn {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a4d32;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-suggestion-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.4);
        }

        .calendar-view {
            background: linear-gradient(135deg, rgba(248, 250, 248, 0.98) 0%, rgba(230, 243, 230, 0.98) 100%);
            border-radius: 15px;
            border: 3px solid #d4af37;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: linear-gradient(135deg, #2d5a3d 0%, #1a4d32 100%);
            color: #ffffff;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a4d32;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .calendar-day:hover {
            border-color: #d4af37;
            background: rgba(212, 175, 55, 0.1);
        }

        .calendar-day.today {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a4d32;
            font-weight: 700;
        }

        .calendar-day.high-activity {
            background: rgba(205, 133, 63, 0.2);
            border-color: #cd853f;
        }

        .calendar-day.rest-day {
            background: rgba(45, 90, 61, 0.2);
            border-color: #2d5a3d;
        }

        .day-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            margin-top: 2px;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .suggestions-panel {
            background: linear-gradient(135deg, rgba(13, 40, 24, 0.9) 0%, rgba(26, 77, 50, 0.7) 100%);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #1a4d32;
        }

        .suggestion-item {
            background: rgba(45, 90, 61, 0.4);
            padding: 18px;
            border-radius: 12px;
            border: 1px solid #2d5a3d;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .suggestion-item:hover {
            border-color: #d4af37;
            background: rgba(212, 175, 55, 0.1);
            transform: translateY(-2px);
        }

        .suggestion-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .suggestion-title {
            color: #d4af37;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .suggestion-description {
            color: #e8f5e8;
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .suggestion-duration {
            color: #b8d4b8;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .energy-chart {
            background: rgba(45, 90, 61, 0.3);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #2d5a3d;
            margin-bottom: 20px;
        }

        .chart-title {
            color: #d4af37;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }

        .energy-bars {
            display: flex;
            justify-content: space-between;
            align-items: end;
            height: 120px;
            margin-bottom: 10px;
        }

        .energy-bar {
            width: 25px;
            background: linear-gradient(to top, #1a4d32, #d4af37);
            border-radius: 4px 4px 0 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .energy-bar:hover {
            background: linear-gradient(to top, #2d5a3d, #f4d03f);
        }

        .bar-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            color: #b8d4b8;
        }

        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-btn {
            background: linear-gradient(135deg, #2d5a3d 0%, #1a4d32 100%);
            border: 2px solid #2d5a3d;
            color: #ffffff;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            text-align: left;
        }

        .action-btn:hover {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a4d32;
            border-color: #b8860b;
            transform: translateX(5px);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(26, 77, 50, 0.95) 0%, rgba(45, 90, 61, 0.95) 100%);
            padding: 30px;
            border-radius: 15px;
            border: 3px solid #d4af37;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal h2 {
            color: #d4af37;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #e8f5e8;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #2d5a3d;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 1rem;
            box-sizing: border-box;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .energy-slider {
            width: 100%;
            margin: 10px 0;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #b8d4b8;
            margin-top: 5px;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a4d32;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #2d5a3d 0%, #1a4d32 100%);
            color: #ffffff;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%);
            color: #1a4d32;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        @media (max-width: 1200px) {
            .main-dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .energy-status {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .calendar-grid {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå± Social Balance</h1>
            <p>Track engagements, manage energy, and prevent burnout with intelligent downtime suggestions</p>
        </div>

        <div class="energy-status">
            <div class="energy-card">
                <div class="energy-level">‚ö°</div>
                <div class="energy-value" id="currentEnergy">75%</div>
                <div class="energy-label">Current Energy</div>
                <div class="energy-sublabel">Feeling good</div>
            </div>
            <div class="energy-card">
                <div class="energy-level">üìÖ</div>
                <div class="energy-value" id="todayInteractions">4</div>
                <div class="energy-label">Today's Interactions</div>
                <div class="energy-sublabel">2 meetings, 2 calls</div>
            </div>
            <div class="energy-card">
                <div class="energy-level">üéØ</div>
                <div class="energy-value" id="weeklyBalance">68%</div>
                <div class="energy-label">Weekly Balance</div>
                <div class="energy-sublabel">Good rhythm</div>
            </div>
            <div class="energy-card">
                <div class="energy-level">‚è∞</div>
                <div class="energy-value" id="nextBreak">2h</div>
                <div class="energy-label">Next Suggested Break</div>
                <div class="energy-sublabel">Recharge time</div>
            </div>
        </div>

        <div class="main-dashboard">
            <div class="dashboard-left">
                <div class="interaction-log">
                    <div class="section-header">
                        <div class="section-title">
                            üìã Today's Interaction Log
                        </div>
                        <button class="add-interaction-btn" onclick="openInteractionModal()">
                            <span>‚ûï</span> Log Interaction
                        </button>
                    </div>
                    <div id="interactionsList">
                        <!-- Interactions will be populated here -->
                    </div>
                </div>

                <div class="calendar-view">
                    <div class="section-header">
                        <div class="section-title">
                            üìÖ Social Calendar & Balance
                        </div>
                        <div class="calendar-nav">
                            <button class="nav-btn" onclick="previousWeek()">‚Äπ</button>
                            <button class="nav-btn" onclick="nextWeek()">‚Ä∫</button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar will be populated here -->
                    </div>
                    <div class="energy-chart">
                        <div class="chart-title">Weekly Energy Trend</div>
                        <div class="energy-bars" id="energyBars">
                            <!-- Energy bars will be populated here -->
                        </div>
                        <div class="bar-labels">
                            <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span><span>Sun</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="suggestions-panel">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="section-title" style="color: #d4af37; margin: 0;">
                            üí° Restorative Suggestions
                        </div>
                        <button class="add-suggestion-btn" onclick="openCustomSuggestionModal()" title="Add custom activity">
                            ‚ûï
                        </button>
                    </div>
                    <div id="suggestionsList">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>

                <div class="suggestions-panel">
                    <div class="section-title" style="color: #d4af37; margin-bottom: 20px;">
                        ‚ö° Quick Actions
                    </div>
                    <div class="quick-actions">
                        <button class="action-btn" onclick="quickEnergyCheck()">
                            <span>üìä</span> Quick Energy Check
                        </button>
                        <button class="action-btn" onclick="scheduleDowntime()">
                            <span>üõå</span> Schedule Downtime
                        </button>
                        <button class="action-btn" onclick="viewInsights()">
                            <span>üìà</span> View Balance Insights
                        </button>
                        <button class="action-btn" onclick="setEnergyGoals()">
                            <span>üéØ</span> Set Energy Goals
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Interaction Modal -->
    <div class="modal" id="interactionModal">
        <div class="modal-content">
            <h2>Log Social Interaction</h2>
            <form id="interactionForm">
                <div class="form-group">
                    <label>Interaction Type</label>
                    <select id="interactionType" required>
                        <option value="">Select type...</option>
                        <option value="meeting">In-Person Meeting</option>
                        <option value="video-call">Video Call</option>
                        <option value="phone-call">Phone Call</option>
                        <option value="social-event">Social Event</option>
                        <option value="networking">Networking Event</option>
                        <option value="presentation">Presentation</option>
                        <option value="workshop">Workshop/Training</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Title/Description</label>
                    <input type="text" id="interactionTitle" placeholder="e.g., Team standup, Client presentation" required>
                </div>
                <div class="form-group">
                    <label>Duration (minutes)</label>
                    <input type="number" id="interactionDuration" min="5" max="480" value="30" required>
                </div>
                <div class="form-group">
                    <label>Number of People</label>
                    <input type="number" id="peopleCount" min="1" max="100" value="2" required>
                </div>
                <div class="form-group">
                    <label>Energy Impact</label>
                    <input type="range" id="energyImpact" min="1" max="5" value="3" class="energy-slider">
                    <div class="slider-labels">
                        <span>Very Draining</span>
                        <span>Neutral</span>
                        <span>Very Energizing</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Notes (optional)</label>
                    <textarea id="interactionNotes" rows="3" placeholder="How did this interaction affect your energy?"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeInteractionModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Log Interaction</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Custom Suggestion Modal -->
    <div class="modal" id="customSuggestionModal">
        <div class="modal-content">
            <h2>Add Custom Restorative Activity</h2>
            <form id="customSuggestionForm">
                <div class="form-group">
                    <label>Activity Name</label>
                    <input type="text" id="customActivityName" placeholder="e.g., Yoga session, Art therapy" required>
                </div>
                <div class="form-group">
                    <label>Icon/Emoji</label>
                    <input type="text" id="customActivityIcon" placeholder="üßò (choose an emoji)" maxlength="2" required>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="customActivityDescription" rows="3" placeholder="Describe how this activity helps you recharge..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Duration</label>
                    <select id="customActivityDuration" required>
                        <option value="">Select duration...</option>
                        <option value="5 min">5 minutes</option>
                        <option value="10 min">10 minutes</option>
                        <option value="15 min">15 minutes</option>
                        <option value="20 min">20 minutes</option>
                        <option value="30 min">30 minutes</option>
                        <option value="45 min">45 minutes</option>
                        <option value="1 hour">1 hour</option>
                        <option value="custom">Custom duration</option>
                    </select>
                </div>
                <div class="form-group" id="customDurationGroup" style="display: none;">
                    <label>Custom Duration</label>
                    <input type="text" id="customDurationInput" placeholder="e.g., 25 min, 1.5 hours">
                </div>
                <div class="form-group">
                    <label>Energy Boost Level</label>
                    <input type="range" id="customEnergyBoost" min="1" max="5" value="3" class="energy-slider">
                    <div class="slider-labels">
                        <span>Low boost</span>
                        <span>Medium</span>
                        <span>High boost</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Activity Type</label>
                    <select id="customActivityType">
                        <option value="physical">Physical Activity</option>
                        <option value="mental">Mental/Mindfulness</option>
                        <option value="creative">Creative Expression</option>
                        <option value="social">Light Social</option>
                        <option value="nature">Nature-based</option>
                        <option value="self-care">Self-care</option>
                        <option value="hobby">Personal Hobby</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeCustomSuggestionModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Activity</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        let interactions = [
            {
                id: 1,
                type: "meeting",
                title: "Team Standup",
                duration: 30,
                peopleCount: 8,
                energyImpact: 2,
                timestamp: new Date().setHours(9, 0),
                notes: "Long discussion about project delays, felt a bit draining"
            },
            {
                id: 2,
                type: "video-call",
                title: "Client Presentation",
                duration: 60,
                peopleCount: 5,
                energyImpact: 4,
                timestamp: new Date().setHours(11, 0),
                notes: "Great feedback from client, felt energized and accomplished"
            },
            {
                id: 3,
                type: "phone-call",
                title: "1:1 with Sarah",
                duration: 45,
                peopleCount: 2,
                energyImpact: 4,
                timestamp: new Date().setHours(14, 0),
                notes: "Productive mentoring session, very fulfilling"
            },
            {
                id: 4,
                type: "social-event",
                title: "Coffee with Alex",
                duration: 90,
                peopleCount: 2,
                energyImpact: 5,
                timestamp: new Date().setHours(16, 30),
                notes: "Relaxed catch-up, felt recharged and connected"
            }
        ];

        let weeklyEnergyData = [65, 70, 60, 75, 80, 85, 75]; // Mon-Sun energy levels
        let currentWeekOffset = 0;
        let customSuggestionIdCounter = 100;

        let restorativeSuggestions = [
            {
                icon: "üåø",
                title: "Nature Walk",
                description: "Take a 20-minute walk in a nearby park or green space to reset your energy.",
                duration: "20 min",
                energyBoost: 3
            },
            {
                icon: "üßò",
                title: "Mindful Breathing",
                description: "Practice deep breathing exercises to center yourself and reduce social fatigue.",
                duration: "10 min",
                energyBoost: 2
            },
            {
                icon: "üìö",
                title: "Solo Reading Time",
                description: "Enjoy some quiet reading time to recharge your mental batteries.",
                duration: "30 min",
                energyBoost: 4
            },
            {
                icon: "üéµ",
                title: "Music & Reflection",
                description: "Listen to calming music while journaling about your day's interactions.",
                duration: "25 min",
                energyBoost: 3
            },
            {
                icon: "‚òï",
                title: "Mindful Tea Break",
                description: "Prepare and enjoy a warm beverage in complete silence and mindfulness.",
                duration: "15 min",
                energyBoost: 2
            },
            {
                icon: "üõÅ",
                title: "Relaxing Bath",
                description: "Take a warm bath with essential oils to wash away social stress.",
                duration: "45 min",
                energyBoost: 5
            }
        ];

        // Initialize app
        function initializeApp() {
            renderInteractions();
            renderCalendar();
            renderEnergyChart();
            renderSuggestions();
            updateDashboardStats();
            setupEventListeners();
        }

        function setupEventListeners() {
            document.getElementById('interactionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                logInteraction();
            });

            document.getElementById('customSuggestionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addCustomSuggestion();
            });

            // Update energy impact display
            document.getElementById('energyImpact').addEventListener('input', function(e) {
                updateEnergyImpactDisplay(e.target.value);
            });

            // Show/hide custom duration input
            document.getElementById('customActivityDuration').addEventListener('change', function(e) {
                const customGroup = document.getElementById('customDurationGroup');
                customGroup.style.display = e.target.value === 'custom' ? 'block' : 'none';
            });
        }

        function renderInteractions() {
            const list = document.getElementById('interactionsList');
            const todayInteractions = interactions.filter(interaction => {
                const interactionDate = new Date(interaction.timestamp);
                const today = new Date();
                return interactionDate.toDateString() === today.toDateString();
            });

            if (todayInteractions.length === 0) {
                list.innerHTML = '<div style="text-align: center; color: #888; font-style: italic; padding: 40px;">No interactions logged today</div>';
                return;
            }

            list.innerHTML = todayInteractions.map(interaction => `
                <div class="interaction-item">
                    <div class="interaction-type">${getInteractionTypeLabel(interaction.type)}</div>
                    <div class="interaction-title">${interaction.title}</div>
                    <div class="interaction-details">
                        ${interaction.duration} minutes ‚Ä¢ ${interaction.peopleCount} ${interaction.peopleCount === 1 ? 'person' : 'people'}
                        ${interaction.notes ? `<br><em>"${interaction.notes}"</em>` : ''}
                    </div>
                    <div class="interaction-meta">
                        <span>${formatTime(interaction.timestamp)}</span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="energy-impact ${getEnergyImpactClass(interaction.energyImpact)}">
                                ${getEnergyImpactIcon(interaction.energyImpact)} ${getEnergyImpactLabel(interaction.energyImpact)}
                            </div>
                            <button class="delete-btn" onclick="deleteInteraction(${interaction.id})" title="Delete interaction">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const today = new Date();
            const startOfWeek = new Date(today);
            startOfWeek.setDate(today.getDate() - today.getDay() + (currentWeekOffset * 7));

            const days = [];
            for (let i = 0; i < 7; i++) {
                const day = new Date(startOfWeek);
                day.setDate(startOfWeek.getDate() + i);
                days.push(day);
            }

            grid.innerHTML = days.map((day, index) => {
                const isToday = day.toDateString() === today.toDateString();
                const dayInteractions = getDayInteractions(day);
                const energyLevel = weeklyEnergyData[index];
                
                let dayClass = 'calendar-day';
                if (isToday) dayClass += ' today';
                else if (dayInteractions.length > 3) dayClass += ' high-activity';
                else if (dayInteractions.length === 0) dayClass += ' rest-day';

                return `
                    <div class="${dayClass}" onclick="viewDayDetails('${day.toISOString()}')">
                        <div>${day.getDate()}</div>
                        <div style="font-size: 0.7rem; color: #666;">${dayInteractions.length} events</div>
                        <div class="day-indicator" style="background: ${getEnergyColor(energyLevel)};"></div>
                    </div>
                `;
            }).join('');
        }

        function renderEnergyChart() {
            const bars = document.getElementById('energyBars');
            bars.innerHTML = weeklyEnergyData.map((energy, index) => `
                <div class="energy-bar" 
                     style="height: ${energy}%; background: linear-gradient(to top, #1a4d32, ${getEnergyColor(energy)});"
                     title="${['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][index]}: ${energy}% energy">
                </div>
            `).join('');
        }

        function renderSuggestions() {
            const list = document.getElementById('suggestionsList');
            const currentEnergy = getCurrentEnergyLevel();
            
            // Filter suggestions based on current energy level
            let filteredSuggestions = restorativeSuggestions;
            if (currentEnergy < 50) {
                filteredSuggestions = restorativeSuggestions.filter(s => s.energyBoost >= 3);
            } else if (currentEnergy > 80) {
                filteredSuggestions = restorativeSuggestions.filter(s => s.energyBoost <= 3);
            }

            list.innerHTML = filteredSuggestions.slice(0, 3).map((suggestion, index) => `
                <div class="suggestion-item">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                        <div class="suggestion-icon">${suggestion.icon}</div>
                        ${suggestion.custom ? `<button class="delete-btn" onclick="deleteCustomSuggestion(${suggestion.id})" title="Delete custom activity">üóëÔ∏è</button>` : ''}
                    </div>
                    <div class="suggestion-title" onclick="startActivity('${suggestion.title}')" style="cursor: pointer;">${suggestion.title}</div>
                    <div class="suggestion-description" onclick="startActivity('${suggestion.title}')" style="cursor: pointer;">${suggestion.description}</div>
                    <div class="suggestion-duration" onclick="startActivity('${suggestion.title}')" style="cursor: pointer;">
                        <span>‚è±Ô∏è</span>
                        <span>${suggestion.duration}</span>
                        <span style="margin-left: auto;">+${suggestion.energyBoost} energy</span>
                    </div>
                </div>
            `).join('');
        }

        function updateDashboardStats() {
            const currentEnergy = getCurrentEnergyLevel();
            const todayInteractions = getTodayInteractions();
            const weeklyBalance = calculateWeeklyBalance();
            const nextBreak = calculateNextBreak();

            document.getElementById('currentEnergy').textContent = currentEnergy + '%';
            document.getElementById('todayInteractions').textContent = todayInteractions.length;
            document.getElementById('weeklyBalance').textContent = weeklyBalance + '%';
            document.getElementById('nextBreak').textContent = nextBreak;

            // Update energy status description
            const energyCard = document.querySelector('.energy-card .energy-sublabel');
            if (currentEnergy >= 80) {
                energyCard.textContent = 'Feeling energized';
            } else if (currentEnergy >= 60) {
                energyCard.textContent = 'Feeling good';
            } else if (currentEnergy >= 40) {
                energyCard.textContent = 'Getting tired';
            } else {
                energyCard.textContent = 'Need rest';
            }
        }

        function openInteractionModal() {
            document.getElementById('interactionModal').style.display = 'flex';
        }

        function closeInteractionModal() {
            document.getElementById('interactionModal').style.display = 'none';
            document.getElementById('interactionForm').reset();
        }

        function logInteraction() {
            const type = document.getElementById('interactionType').value;
            const title = document.getElementById('interactionTitle').value;
            const duration = parseInt(document.getElementById('interactionDuration').value);
            const peopleCount = parseInt(document.getElementById('peopleCount').value);
            const energyImpact = parseInt(document.getElementById('energyImpact').value);
            const notes = document.getElementById('interactionNotes').value;

            const newInteraction = {
                id: interactions.length + 1,
                type,
                title,
                duration,
                peopleCount,
                energyImpact,
                timestamp: Date.now(),
                notes
            };

            interactions.push(newInteraction);
            
            renderInteractions();
            updateDashboardStats();
            closeInteractionModal();
            
            showToast(`Interaction logged! ${getEnergyImpactIcon(energyImpact)} Energy impact: ${getEnergyImpactLabel(energyImpact)}`);
            
            // Update current energy based on interaction
            updateCurrentEnergy(energyImpact);
        }

        function quickEnergyCheck() {
            const currentEnergy = getCurrentEnergyLevel();
            let message = `Current Energy: ${currentEnergy}%\n\n`;
            
            if (currentEnergy >= 80) {
                message += "üåü You're feeling great! Perfect time for challenging interactions or networking.";
            } else if (currentEnergy >= 60) {
                message += "üòä Good energy levels. You can handle most social activities comfortably.";
            } else if (currentEnergy >= 40) {
                message += "üòê Energy is getting low. Consider lighter interactions or schedule some downtime.";
            } else {
                message += "üò¥ Energy is quite low. Time for some restorative activities and rest.";
            }
            
            const todayInteractions = getTodayInteractions();
            message += `\n\nToday's Activity: ${todayInteractions.length} interactions`;
            message += `\nTotal Duration: ${todayInteractions.reduce((sum, i) => sum + i.duration, 0)} minutes`;
            
            alert(message);
        }

        function scheduleDowntime() {
            const suggestions = [
                "Block 30 minutes for a nature walk",
                "Schedule 15 minutes of meditation",
                "Plan a quiet lunch break alone",
                "Set aside evening time for reading",
                "Block morning time for journaling"
            ];
            
            const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
            showToast(`Downtime scheduled! üìÖ ${randomSuggestion}`);
        }

        function viewInsights() {
            const avgEnergy = Math.round(weeklyEnergyData.reduce((sum, e) => sum + e, 0) / 7);
            const totalInteractions = interactions.length;
            const avgDuration = Math.round(interactions.reduce((sum, i) => sum + i.duration, 0) / interactions.length);
            const energizingCount = interactions.filter(i => i.energyImpact >= 4).length;
            
            alert(`üìä Weekly Balance Insights:\n\n` +
                  `Average Energy: ${avgEnergy}%\n` +
                  `Total Interactions: ${totalInteractions}\n` +
                  `Average Duration: ${avgDuration} minutes\n` +
                  `Energizing Interactions: ${energizingCount}\n\n` +
                  `üí° Tip: ${avgEnergy < 60 ? 'Consider scheduling more downtime' : 'Great balance! Keep it up'}`);
        }

        function setEnergyGoals() {
            const goals = [
                "Maintain 70%+ energy throughout the week",
                "Limit daily interactions to 4 hours max",
                "Schedule 2 energizing activities per week",
                "Take 15-minute breaks between meetings",
                "End each day with 30 minutes of downtime"
            ];
            
            alert(`üéØ Suggested Energy Goals:\n\n${goals.map((goal, i) => `${i + 1}. ${goal}`).join('\n')}\n\nChoose 2-3 goals to focus on this week!`);
        }

        function startActivity(activityName) {
            showToast(`Starting: ${activityName} üå± Enjoy your restorative time!`);
            
            // Simulate energy boost after activity
            setTimeout(() => {
                showToast(`Activity completed! +3 energy boost ‚ö°`);
            }, 2000);
        }

        function deleteInteraction(interactionId) {
            if (confirm('Are you sure you want to delete this interaction?')) {
                interactions = interactions.filter(interaction => interaction.id !== interactionId);
                renderInteractions();
                updateDashboardStats();
                showToast('Interaction deleted! üóëÔ∏è');
            }
        }

        function openCustomSuggestionModal() {
            document.getElementById('customSuggestionModal').style.display = 'flex';
        }

        function closeCustomSuggestionModal() {
            document.getElementById('customSuggestionModal').style.display = 'none';
            document.getElementById('customSuggestionForm').reset();
            document.getElementById('customDurationGroup').style.display = 'none';
        }

        function addCustomSuggestion() {
            const name = document.getElementById('customActivityName').value;
            const icon = document.getElementById('customActivityIcon').value;
            const description = document.getElementById('customActivityDescription').value;
            let duration = document.getElementById('customActivityDuration').value;
            const energyBoost = parseInt(document.getElementById('customEnergyBoost').value);
            const type = document.getElementById('customActivityType').value;

            if (duration === 'custom') {
                duration = document.getElementById('customDurationInput').value;
                if (!duration) {
                    showToast('Please enter a custom duration');
                    return;
                }
            }

            const newSuggestion = {
                id: customSuggestionIdCounter++,
                icon: icon,
                title: name,
                description: description,
                duration: duration,
                energyBoost: energyBoost,
                type: type,
                custom: true
            };

            restorativeSuggestions.push(newSuggestion);
            renderSuggestions();
            closeCustomSuggestionModal();
            showToast(`Custom activity "${name}" added! üéâ`);
        }

        function deleteCustomSuggestion(suggestionId) {
            if (confirm('Are you sure you want to delete this custom activity?')) {
                restorativeSuggestions = restorativeSuggestions.filter(suggestion => suggestion.id !== suggestionId);
                renderSuggestions();
                showToast('Custom activity deleted! üóëÔ∏è');
            }
        }

        function previousWeek() {
            currentWeekOffset--;
            renderCalendar();
        }

        function nextWeek() {
            currentWeekOffset++;
            renderCalendar();
        }

        function viewDayDetails(dateString) {
            const date = new Date(dateString);
            const dayInteractions = getDayInteractions(date);
            const dayName = date.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
            
            if (dayInteractions.length === 0) {
                alert(`üìÖ ${dayName}\n\nNo interactions scheduled.\nPerfect day for rest and recharge! üå±`);
            } else {
                const details = dayInteractions.map(i => 
                    `‚Ä¢ ${i.title} (${i.duration}min) - ${getEnergyImpactLabel(i.energyImpact)}`
                ).join('\n');
                
                alert(`üìÖ ${dayName}\n\n${dayInteractions.length} interactions:\n${details}`);
            }
        }

        // Helper functions
        function getCurrentEnergyLevel() {
            const today = new Date().getDay();
            const todayIndex = today === 0 ? 6 : today - 1; // Convert Sunday=0 to index 6
            return weeklyEnergyData[todayIndex] || 75;
        }

        function getTodayInteractions() {
            const today = new Date();
            return interactions.filter(interaction => {
                const interactionDate = new Date(interaction.timestamp);
                return interactionDate.toDateString() === today.toDateString();
            });
        }

        function getDayInteractions(date) {
            return interactions.filter(interaction => {
                const interactionDate = new Date(interaction.timestamp);
                return interactionDate.toDateString() === date.toDateString();
            });
        }

        function calculateWeeklyBalance() {
            const avgEnergy = weeklyEnergyData.reduce((sum, e) => sum + e, 0) / 7;
            return Math.round(avgEnergy);
        }

        function calculateNextBreak() {
            const now = new Date();
            const nextHour = new Date(now.getTime() + 2 * 60 * 60 * 1000);
            const diff = nextHour - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            return hours + 'h';
        }

        function updateCurrentEnergy(energyImpact) {
            const today = new Date().getDay();
            const todayIndex = today === 0 ? 6 : today - 1;
            
            // Adjust energy based on interaction impact
            let adjustment = 0;
            if (energyImpact <= 2) adjustment = -5;
            else if (energyImpact >= 4) adjustment = +3;
            
            weeklyEnergyData[todayIndex] = Math.max(0, Math.min(100, weeklyEnergyData[todayIndex] + adjustment));
            renderEnergyChart();
            updateDashboardStats();
        }

        function getInteractionTypeLabel(type) {
            const labels = {
                'meeting': 'Meeting',
                'video-call': 'Video Call',
                'phone-call': 'Phone Call',
                'social-event': 'Social Event',
                'networking': 'Networking',
                'presentation': 'Presentation',
                'workshop': 'Workshop'
            };
            return labels[type] || type;
        }

        function getEnergyImpactClass(impact) {
            if (impact <= 2) return 'impact-draining';
            if (impact >= 4) return 'impact-positive';
            return 'impact-neutral';
        }

        function getEnergyImpactIcon(impact) {
            if (impact <= 2) return 'üò¥';
            if (impact >= 4) return '‚ö°';
            return 'üòê';
        }

        function getEnergyImpactLabel(impact) {
            const labels = {
                1: 'Very Draining',
                2: 'Draining',
                3: 'Neutral',
                4: 'Energizing',
                5: 'Very Energizing'
            };
            return labels[impact] || 'Neutral';
        }

        function getEnergyColor(energy) {
            if (energy >= 80) return '#d4af37';
            if (energy >= 60) return '#f4d03f';
            if (energy >= 40) return '#b8860b';
            return '#cd853f';
        }

        function formatTime(timestamp) {
            return new Date(timestamp).toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Initialize app when page loads
        initializeApp();

        // Simulate real-time energy updates
        setInterval(() => {
            // Gradually decrease energy throughout the day
            const now = new Date();
            if (now.getHours() >= 9 && now.getHours() <= 18) {
                const today = now.getDay();
                const todayIndex = today === 0 ? 6 : today - 1;
                if (weeklyEnergyData[todayIndex] > 20) {
                    weeklyEnergyData[todayIndex] = Math.max(20, weeklyEnergyData[todayIndex] - 0.5);
                    renderEnergyChart();
                    updateDashboardStats();
                }
            }
        }, 300000); // Every 5 minutes
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'986bf9bb128f09e4',t:'MTc1OTE1NDA5OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
