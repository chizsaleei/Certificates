<script>
  const local = "./data/testimonials.json";
  const remote = "https://raw.githubusercontent.com/chizsaleei/studentstestimonials/main/testimonials.json";
  const target = document.getElementById("testi-grid");

  function render(list){
    target.innerHTML = "";
    list.forEach(t => {
      const card = document.createElement("article");
      card.className = "testi-card";
      card.innerHTML = `
        <div class="testi-quote">“${t.quote}”</div>
        <div class="testi-meta">
          <div class="testi-name">${t.name}</div>
          <div class="testi-role">${t.role || ""}</div>
        </div>`;
      target.appendChild(card);
    });
  }

  // Try local first, then remote
  fetch(local, {cache:"no-store"})
    .then(r => r.ok ? r.json() : Promise.reject())
    .then(render)
    .catch(() => {
      fetch(remote, {cache:"no-store"})
        .then(r => r.ok ? r.json() : Promise.reject())
        .then(render)
        .catch(() => { target.innerHTML = "<p style='color: var(--muted)'>Unable to load testimonials.</p>"; });
    });
</script>
